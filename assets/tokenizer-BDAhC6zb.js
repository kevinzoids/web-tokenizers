(function(){"use strict";let r,f=null;function _(){return(f===null||f.byteLength===0)&&(f=new Uint8Array(r.memory.buffer)),f}function x(e,t){return e=e>>>0,_().subarray(e/1,e/1+t)}function k(e){const t=r.__externref_table_alloc();return r.__wbindgen_export_2.set(t,e),t}function A(e,t){try{return e.apply(this,t)}catch(n){const i=k(n);r.__wbindgen_exn_store(i)}}const w=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&w.decode();function y(e,t){return e=e>>>0,w.decode(_().subarray(e,e+t))}let g=0;const d=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},T=typeof d.encodeInto=="function"?function(e,t){return d.encodeInto(e,t)}:function(e,t){const n=d.encode(e);return t.set(n),{read:e.length,written:n.length}};function M(e,t,n){if(n===void 0){const a=d.encode(e),b=t(a.length,1)>>>0;return _().subarray(b,b+a.length).set(a),g=a.length,b}let i=e.length,s=t(i,1)>>>0;const D=_();let o=0;for(;o<i;o++){const a=e.charCodeAt(o);if(a>127)break;D[s+o]=a}if(o!==i){o!==0&&(e=e.slice(o)),s=n(s,i,i=o+e.length*3,1)>>>0;const a=_().subarray(s+o,s+i),b=T(e,a);o+=b.written,s=n(s,i,o,1)>>>0}return g=o,s}function W(e){const t=M(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=g,i=r.tokenize(t,n);return l.__wrap(i)}let c=null;function E(){return(c===null||c.buffer.detached===!0||c.buffer.detached===void 0&&c.buffer!==r.memory.buffer)&&(c=new DataView(r.memory.buffer)),c}function R(e,t){e=e>>>0;const n=E(),i=[];for(let s=e;s<e+4*t;s+=4)i.push(r.__wbindgen_export_2.get(n.getUint32(s,!0)));return r.__externref_drop_slice(e,t),i}let u=null;function U(){return(u===null||u.byteLength===0)&&(u=new Uint32Array(r.memory.buffer)),u}function m(e,t){return e=e>>>0,U().subarray(e/4,e/4+t)}const h=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>r.__wbg_token_free(e>>>0,1));class l{static __wrap(t){t=t>>>0;const n=Object.create(l.prototype);return n.__wbg_ptr=t,h.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,h.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_token_free(t,0)}get tokens(){const t=r.token_get_tokens(this.__wbg_ptr);var n=R(t[0],t[1]).slice();return r.__wbindgen_free(t[0],t[1]*4,4),n}get inputIds(){const t=r.token_get_ids(this.__wbg_ptr);var n=m(t[0],t[1]).slice();return r.__wbindgen_free(t[0],t[1]*4,4),n}get attentionMask(){const t=r.token_get_attention_mask(this.__wbg_ptr);var n=m(t[0],t[1]).slice();return r.__wbindgen_free(t[0],t[1]*4,4),n}}async function v(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(i){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function z(){const e={};return e.wbg={},e.wbg.__wbg_getRandomValues_3c9c0d586e575a16=function(){return A(function(t,n){globalThis.crypto.getRandomValues(x(t,n))},arguments)},e.wbg.__wbindgen_init_externref_table=function(){const t=r.__wbindgen_export_2,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e.wbg.__wbindgen_string_new=function(t,n){return y(t,n)},e.wbg.__wbindgen_throw=function(t,n){throw new Error(y(t,n))},e}function F(e,t){return r=e.exports,p.__wbindgen_wasm_module=t,c=null,u=null,f=null,r.__wbindgen_start(),r}async function p(e){if(r!==void 0)return r;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/web-tokenizers/assets/web_tokenizers_bg-CK_bMWo9.wasm",self.location.href));const t=z();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:i}=await v(await e,t);return F(n,i)}onmessage=async e=>{const{id:t,text:n}=e.data;await p();const i=W(n);postMessage({id:t,data:{tokens:i.tokens,inputIds:i.inputIds,attentionMask:i.attentionMask}})}})();
